# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Supabase Database

## üìã –ß—Ç–æ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç –ø–æ–ª–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è InteliPilot AI:

‚úÖ **3 —Ç–∞–±–ª–∏—Ü—ã**: profiles, projects, tool_results
‚úÖ **–ò–Ω–¥–µ–∫—Å—ã** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
‚úÖ **–¢—Ä–∏–≥–≥–µ—Ä—ã** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
‚úÖ **RLS –ø–æ–ª–∏—Ç–∏–∫–∏** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è** –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

---

## üéØ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### **–®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard**

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ:
```
https://supabase.com/dashboard/project/yearakcidkxachppwvpa
```

### **–®–∞–≥ 2: –û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor**

1. –í –ª–µ–≤–æ–º –º–µ–Ω—é –Ω–∞–π–¥–∏—Ç–µ **SQL Editor**
2. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ
3. –ù–∞–∂–º–∏—Ç–µ **New Query** (–±–æ–ª—å—à–∞—è –∑–µ–ª—ë–Ω–∞—è –∫–Ω–æ–ø–∫–∞)

### **–®–∞–≥ 3: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç**

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `supabase-setup.sql` –≤ VSCode
2. –í—ã–¥–µ–ª–∏—Ç–µ **–í–°–Å** —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (Ctrl+A)
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ (Ctrl+C)

### **–®–∞–≥ 4: –í—Å—Ç–∞–≤—å—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ**

1. –í SQL Editor –≤—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ (Ctrl+V)
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **Run** (–∏–ª–∏ Ctrl+Enter)
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (–∑–∞–π–º—ë—Ç 2-5 —Å–µ–∫—É–Ω–¥)

### **–®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç**

–ï—Å–ª–∏ –≤—Å—ë –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ, –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
Success. No rows returned
```

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–ª —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –Ω–æ –Ω–µ –≤–µ—Ä–Ω—É–ª –¥–∞–Ω–Ω—ã—Ö.

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### **1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—ã**

–ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Table Editor** (–≤ –ª–µ–≤–æ–º –º–µ–Ω—é)

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
- ‚úÖ profiles
- ‚úÖ projects
- ‚úÖ tool_results

### **2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏**

–ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Authentication** ‚Üí **Policies**

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã (–æ–∫–æ–ª–æ 10 –ø–æ–ª–∏—Ç–∏–∫)

### **3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω–¥–µ–∫—Å—ã**

–ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Database** ‚Üí **Indexes**

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –≤—Ä—É—á–Ω—É—é**

1. Table Editor ‚Üí **projects**
2. –ö–ª–∏–∫–Ω–∏—Ç–µ **Insert row**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - `user_id`: `temp-user-id`
   - `name`: `–ú–æ–π –ø–µ—Ä–≤—ã–π –ø—Ä–æ–µ–∫—Ç`
   - `description`: `–¢–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç`
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### **–ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

–í SQL Editor –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
-- –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
INSERT INTO public.projects (user_id, name, description)
VALUES ('temp-user-id', '–¢–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç', '–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞')
RETURNING *;
```

---

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü

### **profiles** (–ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
```
id               UUID (primary key)
user_id          UUID (foreign key ‚Üí auth.users)
created_at       TIMESTAMPTZ
updated_at       TIMESTAMPTZ
```

### **projects** (–º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã)
```
id               UUID (primary key)
user_id          UUID
name             TEXT (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
description      TEXT (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ)
created_at       TIMESTAMPTZ
updated_at       TIMESTAMPTZ
```

### **tool_results** (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã AI)
```
id               UUID (primary key)
project_id       UUID (foreign key ‚Üí projects)
tool_name        ENUM (audience, custdev, market, offer, funnel, decomposition)
input_data       JSONB
output_data      JSONB
created_at       TIMESTAMPTZ
updated_at       TIMESTAMPTZ
```

---

## üîí –ü–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (RLS)

### **–ß—Ç–æ –∑–∞—â–∏—â–µ–Ω–æ:**

1. **Profiles**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
2. **Projects**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã
3. **Tool Results**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

### **–í—Ä–µ–º–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø:**

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `user_id = 'temp-user-id'`.
–ü–æ–ª–∏—Ç–∏–∫–∏ —Ä–∞–∑—Ä–µ—à–∞—é—Ç –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–∫–∏–º –∑–∞–ø–∏—Å—è–º.

**–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
- –£–¥–∞–ª–∏—Ç–µ –∑–∞–ø–∏—Å–∏ —Å `temp-user-id`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç –≤–∏–¥–µ—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ

---

## üö® –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏

### **–û—à–∏–±–∫–∞: "relation already exists"**

**–ü—Ä–∏—á–∏–Ω–∞**: –¢–∞–±–ª–∏—Ü—ã —É–∂–µ —Å–æ–∑–¥–∞–Ω—ã

**–†–µ—à–µ–Ω–∏–µ**: –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `IF NOT EXISTS`

### **–û—à–∏–±–∫–∞: "permission denied"**

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤

**–†–µ—à–µ–Ω–∏–µ**:
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—ã Owner –ø—Ä–æ–µ–∫—Ç–∞
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Service Role key –≤–º–µ—Å—Ç–æ anon key (Settings ‚Üí API)

### **–û—à–∏–±–∫–∞: "type already exists"**

**–ü—Ä–∏—á–∏–Ω–∞**: Enum `tool_name` —É–∂–µ —Å–æ–∑–¥–∞–Ω

**–†–µ—à–µ–Ω–∏–µ**: –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —Å–∫—Ä–∏–ø—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —ç—Ç—É —Å–∏—Ç—É–∞—Ü–∏—é

---

## üìä –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

### **1. –û–±–Ω–æ–≤–∏—Ç–µ TypeScript —Ç–∏–ø—ã**

```bash
npx supabase gen types typescript --project-id yearakcidkxachppwvpa > src/integrations/supabase/types.ts
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é –≤ Dashboard:
- Settings ‚Üí API ‚Üí Generate Types
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ `src/integrations/supabase/types.ts`

### **2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏**

```bash
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç.

### **3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏**

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤:
- Projects.tsx (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤)
- Audience.tsx (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
- –ò –¥—Ä—É–≥–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã

### **–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –ø—Ä–æ–µ–∫—Ç—ã**
```sql
SELECT * FROM public.projects ORDER BY created_at DESC;
```

### **–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤**
```sql
SELECT
  tr.*,
  p.name as project_name
FROM public.tool_results tr
JOIN public.projects p ON p.id = tr.project_id
ORDER BY tr.created_at DESC;
```

### **–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º**
```sql
SELECT
  tool_name,
  COUNT(*) as count
FROM public.tool_results
GROUP BY tool_name
ORDER BY count DESC;
```

### **–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ**
```sql
-- –û–°–¢–û–†–û–ñ–ù–û! –£–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
DELETE FROM public.tool_results WHERE project_id IN (
  SELECT id FROM public.projects WHERE user_id = 'temp-user-id'
);
DELETE FROM public.projects WHERE user_id = 'temp-user-id';
```

---

## üìû –ü–æ–º–æ—â—å

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: Dashboard ‚Üí Logs ‚Üí Postgres Logs
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: Dashboard ‚Üí Settings ‚Üí General
3. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ GitHub

---

## ‚ú® –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –≤–∞—à–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ! üéâ

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–ø–µ—Ä—å:
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ‚úÖ –ó–∞—â–∏—â–µ–Ω–∞ RLS –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏–Ω–¥–µ–∫—Å–∞–º–∏
- ‚úÖ –ì–æ—Ç–æ–≤–∞ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

---

**–î–∞—Ç–∞**: 2025-11-21
**–ü—Ä–æ–µ–∫—Ç**: InteliPilot AI
**Supabase Project**: yearakcidkxachppwvpa
